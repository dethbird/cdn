{% extends 'layout.twig' %}

{% block title %}Edit media â€” CDN{% endblock %}

{% block content %}
  <h1 class="title">Edit media</h1>
  <div class="box">
  <form method="post" action="/media/{{ media.id|e }}/edit">
      <div class="field">
        <label class="label">Current</label>
        <div class="control">
          {% if media.kind == 'image' and media.url_800 %}
            <img src="{{ media.url_800|e }}" alt="{{ media.title|e }}" style="max-width:300px;max-height:200px;object-fit:cover;border:1px solid #eee;padding:2px;background:#fff" />
          {% elseif media.kind == 'audio' and media.url_main %}
            <audio controls>
              <source src="{{ media.url_main|e }}" />
              Your browser does not support the audio element.
            </audio>
          {% else %}
            <div>No preview available</div>
          {% endif %}
        </div>
      </div>

      <div class="field">
        <label class="label">Title</label>
        <div class="control">
          <input class="input" type="text" name="title" value="{{ media.title|e }}" />
        </div>
      </div>

      <div class="field">
        <label class="label">Project</label>
        <div class="control">
          <div class="select">
            <select name="project">
              {% for p in projects %}
                <option value="{{ p.id|e }}" {% if p.id == media.project_id %}selected{% endif %}>{{ p.name|e }}</option>
              {% endfor %}
            </select>
          </div>
        </div>
      </div>

      <div class="field">
        <div class="control">
          <button class="button is-primary" title="Save" aria-label="Save changes">
            <i class="fa-solid fa-check" aria-hidden="true"></i>
          </button>
        </div>
      </div>
    </form>
  </div>
{% endblock %}
